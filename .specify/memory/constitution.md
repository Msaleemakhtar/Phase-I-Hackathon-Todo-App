<!--
SYNC IMPACT REPORT:
Version Change: [None → 1.0.0]
Modified Principles: Initial creation
Added Sections: All sections (initial constitution)
Removed Sections: None
Templates Requiring Updates:
  ✅ plan-template.md - Constitution Check section is generic and compatible
  ✅ spec-template.md - Requirements sections align with constitution principles
  ✅ tasks-template.md - Test and implementation phases align with constitution
Follow-up TODOs: None - all placeholders filled
-->

# Todo App - Phase I Constitution

## Mission Statement

Build a foundational command-line todo application that demonstrates mastery of spec-driven development. This phase serves as the cornerstone for future evolution into a cloud-native, AI-powered distributed system.

---

## Core Principles

### I. Spec-Driven Development (Mandatory)

**Philosophy**: The specification is the source of truth; AI is the implementation engine.

**Requirements**:
- ALL application code MUST be generated by an AI agent from written specifications.
- Manual coding of features, business logic, or UI is **strictly forbidden**, with one exception.
- **Exception for AI Limitations**: In the rare event that the AI code generator cannot produce a correct implementation for a well-defined specification after three refinement cycles, a developer may manually write the minimum necessary code. This action MUST be documented as a 'justified deviation' and reviewed by the team.
- Development follows a continuous cycle: **Spec → AI Generate → Test → Refine Spec → Regenerate**.
- Specifications MUST be managed via GitHub Spec-Kit Plus.

**Verification**:
- Commit history shows specification files created/modified before implementation.

**Rationale**: By enforcing AI-driven development, we ensure consistency, reduce human error, maintain clear traceability from specification to implementation, and demonstrate the viability of AI-first software engineering for future phases.

---

### II. Console-First Interface (CLI Only)

**Philosophy**: Simplicity through text-based interaction.

**Requirements**:
- Pure command-line interface using Python's standard input/output.
- Interactive menu-driven navigation with numbered options.
- Clear, human-readable prompts and responses.
- Formatted text output for task display.
- No graphical user interface (GUI) of any kind.

**User Experience Standards**:
- Main menu MUST be displayed on startup with 6 options (5 features + Exit).
- All user inputs MUST be validated with helpful error messages.
- Success confirmations MUST appear after every operation.
- Ability to return to main menu from any screen.
- Graceful exit mechanism (no forced termination).

**Rationale**: CLI-first design reduces complexity, enables automated testing, ensures cross-platform compatibility, and provides a solid foundation for future API and web interface development.

---

### III. Ephemeral In-Memory State (No Persistence)

**Philosophy**: Keep it simple; state lives only during runtime.

**Requirements**:
- Task storage exclusively in Python data structures (list, dict, or similar).
- NO file I/O operations (no reading/writing files).
- NO database connections (SQLite, PostgreSQL, etc.).
- NO serialization to disk (pickle, JSON files, etc.).
- Application state is completely lost upon termination.

**Verification**:
- Restart application → all tasks disappear.
- No `.txt`, `.json`, `.db`, or similar files created in project directory.
- Code review confirms absence of file operations or database imports.

**Rationale**: Ephemeral state eliminates persistence layer complexity, focuses development effort on core business logic and user experience, and simplifies testing. Future phases will add persistence as a separate, well-architected concern.

---

### IV. Python & UV Ecosystem (Technology Stack)

**Philosophy**: Modern Python with cutting-edge tooling.

**Requirements**:
- **Python Version**: 3.13 or newer MUST be used (leverage latest features).
- **Package Manager**: UV exclusively for dependency and environment management.
- **Project Configuration**: `pyproject.toml` MUST exist and define project metadata.
- **Virtual Environment**: MUST be managed by UV (no manual venv creation).
- **Dependencies**: `pytest` for testing; otherwise, standard library ONLY.

**Rationale**: Python 3.13 provides the latest language features and performance improvements. UV offers fast, reliable dependency management. Minimal dependencies reduce attack surface and simplify deployment.

---

### V. Clean Code Standards (Quality Mandate)

**Philosophy**: AI-generated code MUST meet professional standards.

**Requirements**:
- **Type Hints**: All function signatures MUST include type annotations.
- **Docstrings**: All functions and classes MUST have Google-style docstrings.
- **PEP 8 Compliance**: Follow Python style guide strictly.
- **Error Handling**: Graceful handling of invalid inputs with clear error messages and error codes.
- **Code Organization**: Logical separation of concerns (models, storage, operations, UI, main).
- **No Magic Numbers**: Use named constants for validation limits (e.g., `MAX_TITLE_LENGTH = 200`).

**Code Quality Tools**:
- **Linter**: `ruff check .` MUST pass with zero errors.
- **Formatter**: `ruff format --check .` MUST confirm code is formatted.
- **Type Checker** (Optional but Recommended): `mypy src/` SHOULD pass.

**Rationale**: High code quality standards ensure maintainability, readability, and provide a foundation for future team collaboration. Type hints and docstrings make AI-generated code self-documenting.

---

### VI. Automated Testing (Mandatory)

**Philosophy**: If it's not tested, it's broken.

**Requirements**:
- For every feature specification, a corresponding test specification MUST be created.
- Automated unit tests MUST be written (or generated) using `pytest` to validate the business logic of each feature.
- Tests MUST cover valid inputs, invalid inputs (e.g., incorrect types, out-of-range values), and edge cases (e.g., empty lists, boundary values).

**Verification**:
- A `/tests` directory MUST exist with test files corresponding to application modules.
- All tests MUST be executable via the command `uv run pytest`.
- The full test suite MUST pass with 100% coverage of all core logic before a feature is considered complete.

**Rationale**: Comprehensive automated testing ensures correctness, enables confident refactoring, validates AI-generated code, and provides regression protection as the codebase evolves.

---

### VII. Core Functionality Scope (Feature Freeze)

**Philosophy**: Master the basics before adding complexity.

**Fixed Feature Set (No Additions)**:
1. **Add Task** - Create new todo with title and optional description.
2. **View Tasks** - Display all tasks with ID, title, status, and timestamps.
3. **Update Task** - Modify existing task's title or description.
4. **Delete Task** - Remove task from list by ID.
5. **Mark Complete** - Toggle task completion status.

**Explicitly Out of Scope**:
- ❌ Priorities (high/medium/low)
- ❌ Tags or categories
- ❌ Search or filtering
- ❌ Sorting options
- ❌ Due dates or reminders
- ❌ Recurring tasks
- ❌ Multi-user support
- ❌ Data export/import

**Rationale**: Feature freeze prevents scope creep, ensures deep implementation quality of core functionality, and provides a stable foundation for future enhancement in subsequent phases.

---

## Task Data Model Specification

**Required Fields**:
- `id`: Unique integer identifier (auto-generated, starts at 1).
- `title`: String (1-200 characters, required).
- `description`: String (0-1000 characters, optional).
- `completed`: Boolean (default: False).
- `created_at`: Timestamp (auto-generated on creation).
- `updated_at`: Timestamp (auto-updated on modification).

**Implementation**: MUST use Python `dataclass` with type hints.

---

## Validation Rules (Enforced at Input)

### Task Title
- **Required**: Cannot be empty or whitespace-only.
- **Length**: 1-200 characters (after stripping whitespace).
- **Error Message**: "Title is required and must be 1-200 characters".

### Task Description
- **Optional**: Can be empty string.
- **Length**: 0-1000 characters (if provided).
- **Error Message**: "Description cannot exceed 1000 characters".

### Task ID (for Update/Delete/Complete operations)
- **Required**: Must be a valid integer.
- **Existence**: Must correspond to an existing task.
- **Error Message**: "Invalid task ID" or "Task #X not found".

---

## Success Criteria (Phase I Completion)

### Functional Requirements
- ✅ **Add Task**: Passes all defined tests for adding tasks with valid, invalid, and edge-case titles and descriptions.
- ✅ **View Tasks**: Displays tasks in a table with columns for ID, Title, Status, Created At, and Updated At. An empty state is handled correctly.
- ✅ **Update Task**: Passes all defined tests for updating tasks with valid and invalid IDs and data.
- ✅ **Delete Task**: Passes all defined tests for deleting tasks with valid and invalid IDs.
- ✅ **Mark Complete**: Passes all defined tests for toggling the completion status of tasks with valid and invalid IDs.
- ✅ **Input Validation**: Given invalid input, the application displays the specific error message defined in 'Validation Rules' and redisplays the current menu without crashing.

### Technical Requirements
- ✅ **AI-Generated Code**: All code in `/src/` is AI-generated, with any exceptions documented as 'justified deviations' per Principle I.
- ✅ **Test Coverage**: `uv run pytest --cov=src` reports 100% test coverage on all core logic.
- ✅ **Execution**: Application runs via `uv run python src/main.py` without errors.
- ✅ **No Dependencies**: No external dependencies beyond `pytest` are listed in `pyproject.toml`.
- ✅ **No Persistence**: Restarting the application results in an empty task list.
- ✅ **Code Quality**: `ruff check .` and `ruff format --check .` commands pass successfully.

### Documentation Requirements
- ✅ Complete specifications exist for all 5 features and their corresponding tests.
- ✅ `README.md` includes setup, testing, and running instructions.

---

## Constraints (Hard Limits)

### Development Constraints
- **No Manual Coding**: Developers write specifications only; an AI agent generates implementation (see Principle I for exception).
- **No GUI**: Text-based interface exclusively.
- **No Persistence**: Zero file I/O or database operations.
- **Limited External Libraries**: `pytest` is the only permitted external dependency.

### Technology Constraints
- **Python 3.13+**: Required minimum version.
- **UV Tool**: Only package manager permitted.

---

## Governance & Enforcement

### Authority
This constitution is the **single source of truth** for Phase I development. All decisions, specifications, implementations, and reviews MUST align with these principles.

### Amendment Process
Amendments require:
1. Written justification explaining why the change is necessary.
2. Confirmation that the change doesn't violate hackathon rules.
3. Update to version number and "Last Amended" date.

### Deviation Policy
Any deviation from this constitution MUST be:
1. **Documented**: Clearly noted in the commit message and a central `DEVIATIONS.md` file.
2. **Justified**: Explained as necessary to meet core hackathon requirements or overcome AI limitations.
3. **Minimal**: The smallest possible deviation to achieve the goal.

### Compliance Verification
- All pull requests MUST be reviewed for constitutional compliance.
- Code reviews MUST verify adherence to all seven core principles.
- Test coverage reports MUST be checked before merging.
- Complexity violations MUST be justified in writing.

---

## Philosophical Foundation

**Spec-Driven Development Principle**:
> "The engineer is no longer a syntax writer but a system architect. The specification is the blueprint; AI is the builder."

**Evolution Mindset**:
> "Phase I is the foundation. Build it solid, simple, and clean. Future phases will extend this foundation into a cloud-native, AI-powered distributed system."

**Quality Over Speed**:
> "Take time to write precise specifications. The better your spec, the better the AI's implementation. Iteration on specs is encouraged; manual coding is forbidden."

---

**Version**: 1.0.0 | **Ratified**: 2025-12-04 | **Last Amended**: 2025-12-04
